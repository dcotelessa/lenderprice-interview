angular.module("assignmentManagerApp",["assignmentManagerApp.services"]).filter("all",function(){return function(s){return s}}).filter("unassigned",function(){return function(s){return 0===s.__v}}).filter("assigned",function(){return function(s){return s.__v>0}}).factory("listInfo",function(){var s={lists:{assignee:{data:[],indx:{},loading:!0},jobs:{data:[],indx:{},loading:!0}},selected:"assignee",filter:"all",jobsExpanded:!1};return s}).controller("buttonsController",function(s,e,n,t,i){function a(s){var e={};return s.reduce(function(s,n,t,i){e[n._id]||(e[n._id]=t)}),e}function r(){if(i.lists.jobs){for(var s in i.lists.assignee.data){var e=i.lists.assignee.data[s],n=e.jobs,t={};for(var a in n)if(t[n[a]])n.splice(a,1);else{t[n[a]]=a;var r=i.lists.jobs,o=r.indx[n[a]];o?n[a]=Object.assign({},{_id:n[a],summary:r.data[o].summary}):n.splice(a,1)}e.__v=e.jobs.length}i.lists.jobsExpanded=!0}}s.loadingClasses=function(s){return(i.lists[s].loading?"is-loading":"")+(s===i.selected?"":" is-link")},s.tabClasses=function(s){return i.filter===s?"is-active":""},s.setList=function(s){i.selected!==s&&(i.selected=s,e.$broadcast("displayChange",i))},s.summaryJobs=function(s){var e=n("filter")(i.lists.jobs.data,{id:s})[0];return e.summary},s.setFilter=function(s){i.filter!==s&&(i.filter=s,e.$broadcast("displayChange",i))},t.getAssignees().then(function(s){i.lists.assignee.indx=a(s),i.lists.assignee.data=s,i.lists.assignee.loading=!1,"assignee"===i.selected&&e.$broadcast("displayChange",i)}),t.getJobs().then(function(s){i.lists.jobs.indx=a(s),i.lists.jobs.data=s,i.lists.jobs.loading=!1,r(),"jobs"===i.selected&&e.$broadcast("displayChange",i)})}).controller("displayController",function(s,e){s.jobsExpanded=!1,s.displayData=[],s.isEmpty=function(){return s.displayData.length?"":"is-hidden"},s.setClassbyJobQuantity=function(s){var e=s>4?"job-4":"job-"+s;return e},s.$on("displayChange",function(n,t){s.selectedFilter=e(t.filter),s.displayData=t.lists[t.selected].data,s.jobsExpanded=t.jobsExpanded,console.log(s.$$watchers)})}),angular.module("assignmentManagerApp.services",[]).factory("amAPI",function(s,e){var n="http://interview.lenderprice.com:7070/",t=function(t){var i=t;return function(){var t=s.defer();return e.get(n+"api/"+i).then(function(s,e){t.resolve(s.data)},function(s,e){t.reject(s)}),t.promise}},i={getAssignees:t("assignee"),getJobs:t("jobs")};return i});